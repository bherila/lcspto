@model lcspto_mvc.news

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>

@section head {
    <link rel="Stylesheet" type="text/css" href="@Url.Content("~/Assets/ElixCMS/css/Markdown.Editor.css")" />
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Assets/ElixCMS/js/Markdown.Converter.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Assets/ElixCMS/js/Markdown.Sanitizer.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Assets/ElixCMS/js/Markdown.Editor.js")" type="text/javascript"></script>

    <script type="text/javascript">
        jQuery(document).ready(function () {
            var cc = new Markdown.Converter(); // as opposed to Markdown.getSanitizingConverter();
            var ed = new Markdown.Editor(cc);
            ed.run();
        });
    </script>
}

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    @Html.HiddenFor(model => model.ID)

    <div class="editor-label">
        @Html.LabelFor(model => model.HeaderText)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.HeaderText)
        @Html.ValidationMessageFor(model => model.HeaderText)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ArticleContent)
    </div>
    <div class="wmd-panel">
    <div id="wmd-button-bar"></div>
        @Html.EditorFor(model => model.ArticleContent, "MarkdownEditor")
        @Html.ValidationMessageFor(model => model.ArticleContent)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.PublishDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.PublishDate)
        @Html.ValidationMessageFor(model => model.PublishDate)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Category)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Category)
        @Html.ValidationMessageFor(model => model.Category)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
}

<div style="clear: both;"></div>

<div>@Html.ActionLink("Cancel", "Index")</div>

<hr size="1" />
<h2>Preview</h2>
<div id="wmd-preview" class="wmd-preview"></div>
